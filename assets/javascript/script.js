const card = [{
    name: 'Dracula',
    image: "assets/images/Test_Img1.png",
    kpower: 88,
    ffactor: 78,
    hrating: 98,
    pstrength: 84,
},
{
    name: 'Jason Vorhees',
    image: "assets/images/Test_Img2.png",
    kpower: 94,
    ffactor: 83,
    hrating: 88,
    pstrength: 94,
},
{
    name: 'Michael Myers',
    image: "assets/images/Test_Img1.png",
    kpower: 96,
    ffactor: 89,
    hrating: 94,
    pstrength: 91,
},
{
    name: 'Freddy Krueger',
    image: "assets/images/Test_Img2.png",
    kpower: 97,
    ffactor: 75,
    hrating: 95,
    pstrength: 82,
},
{
    name: 'Candyman',
    image: "assets/images/Test_Img1.png",
    kpower: 93,
    ffactor: 91,
    hrating: 85,
    pstrength: 83,
},
{
    name: 'Chucky',
    image: "assets/images/Test_Img2.png",
    kpower: 73,
    ffactor: 65,
    hrating: 71,
    pstrength: 76,
},
{
    name: 'Leprechaun',
    image: "assets/images/Test_Img1.png",
    kpower: 79,
    ffactor: 62,
    hrating: 64,
    pstrength: 58,
},
{
    name: 'Alien',
    image: "assets/images/Test_Img2.png",
    kpower: 97,
    ffactor: 77,
    hrating: 91,
    pstrength: 81,
},
{
    name: 'Scanners',
    image: "assets/images/Test_Img1.png",
    kpower: 86,
    ffactor: 64,
    hrating: 62,
    pstrength: 71,
},
{
    name: 'The Thing',
    image: "assets/images/Test_Img2.png",
    kpower: 99,
    ffactor: 91,
    hrating: 83,
    pstrength: 82,
},
{
    name: 'Jack Torance',
    image: "assets/images/Test_Img1.png",
    kpower: 74,
    ffactor: 91,
    hrating: 95,
    pstrength: 69,
},
{
    name: 'Wolfman',
    image: "assets/images/Test_Img2.png",
    kpower: 75,
    ffactor: 72,
    hrating: 97,
    pstrength: 85,
},
{
    name: 'Frankenstein',
    image: "assets/images/Test_Img1.png",
    kpower: 68,
    ffactor: 73,
    hrating: 95,
    pstrength: 96,
},
{
    name: 'Evil Dead',
    image: "assets/images/Test_Img2.png",
    kpower: 93,
    ffactor: 84,
    hrating: 83,
    pstrength: 72,
},
{
    name: 'The Fly',
    image: "assets/images/Test_Img1.png",
    kpower: 81,
    ffactor: 87,
    hrating: 77,
    pstrength: 91,
},
{
    name: 'Nosferatu',
    image: "assets/images/Test_Img2.png",
    kpower: 78,
    ffactor: 89,
    hrating: 91,
    pstrength: 76,
},
{
    name: 'Pazuzu',
    image: "assets/images/Test_Img1.png",
    kpower: 64,
    ffactor: 88,
    hrating: 90,
    pstrength: 59,
},
{
    name: 'Angela',
    image: "assets/images/Test_Img1.png",
    kpower: 78,
    ffactor: 74,
    hrating: 70,
    pstrength: 82,
},
{
    name: 'Argentos Demons',
    image: "assets/images/Test_Img1.png",
    kpower: 75,
    ffactor: 80,
    hrating: 74,
    pstrength: 86,
},
{
    name: 'Zombie Flesh Eaters',
    image: "assets/images/Test_Img1.png",
    kpower: 83,
    ffactor: 86,
    hrating: 77,
    pstrength: 82,
},
{
    name: 'Pinhead',
    image: "assets/images/Test_Img1.png",
    kpower: 85,
    ffactor: 87,
    hrating: 92,
    pstrength: 70,
},
{
    name: 'Leatherface',
    image: "assets/images/Test_Img1.png",
    kpower: 74,
    ffactor: 86,
    hrating: 92,
    pstrength: 92,
},
{
    name: 'Tetsuo',
    image: "assets/images/Test_Img1.png",
    kpower: 72,
    ffactor: 64,
    hrating: 79,
    pstrength: 74,
},
{
    name: 'Sadako',
    image: "assets/images/Test_Img1.png",
    kpower: 79,
    ffactor: 90,
    hrating: 89,
    pstrength: 66,
},
{
    name: 'Belial',
    image: "assets/images/Test_Img1.png",
    kpower: 61,
    ffactor: 64,
    hrating: 86,
    pstrength: 76,
},
{
    name: 'The Red Death',
    image: "assets/images/Test_Img1.png",
    kpower: 76,
    ffactor: 72,
    hrating: 82,
    pstrength: 64,
},
{
    name: 'Dr Phibes',
    image: "assets/images/Test_Img1.png",
    kpower: 82,
    ffactor: 79,
    hrating: 66,
    pstrength: 62,
},
{
    name: 'Hannibal Lecter',
    image: "assets/images/Test_Img1.png",
    kpower: 87,
    ffactor: 73,
    hrating: 76,
    pstrength: 62,
},
{
    name: 'Pumpkinhead',
    image: "assets/images/Test_Img1.png",
    kpower: 77,
    ffactor: 68,
    hrating: 59,
    pstrength: 83,
},
{
    name: 'The Blob',
    image: "assets/images/Test_Img1.png",
    kpower: 83,
    ffactor: 74,
    hrating: 67,
    pstrength: 81,
},
{
    name: 'Hitcher',
    image: "assets/images/Test_Img1.png",
    kpower: 82,
    ffactor: 66,
    hrating: 79,
    pstrength: 60,
},
{
    name: 'Society',
    image: "assets/images/Test_Img1.png",
    kpower: 71,
    ffactor: 72,
    hrating: 61,
    pstrength: 64,
},
{
    name: 'Blair Witch',
    image: "assets/images/Test_Img1.png",
    kpower: 65,
    ffactor: 87,
    hrating: 83,
    pstrength: 69,
},
{
    name: 'Pennywise',
    image: "assets/images/Test_Img1.png",
    kpower: 83,
    ffactor: 91,
    hrating: 90,
    pstrength: 85,
},
{
    name: 'Body Snatchers',
    image: "assets/images/Test_Img1.png",
    kpower: 76,
    ffactor: 81,
    hrating: 78,
    pstrength: 90,
},
{
    name: 'Wish Master',
    image: "assets/images/Test_Img1.png",
    kpower: 80,
    ffactor: 78,
    hrating: 68,
    pstrength: 72,
},
{
    name: 'Driller Killer',
    image: "assets/images/Test_Img1.png",
    kpower: 77,
    ffactor: 72,
    hrating: 83,
    pstrength: 63,
},
{
    name: 'Us',
    image: "assets/images/Test_Img1.png",
    kpower: 81,
    ffactor: 77,
    hrating: 88,
    pstrength: 67,
},
{
    name: 'Jigsaw',
    image: "assets/images/Test_Img1.png",
    kpower: 83,
    ffactor: 68,
    hrating: 79,
    pstrength: 72,
},
];

const playerWins = [];
const computerWins =[];

/**
 * Below is some rudimentary code to create two arrays based on a randomised shuffle or the main arrary 
 * link to splice method
 * https://thewebdev.info/2022/06/26/how-to-split-array-into-two-arrays-with-javascript/#:~:text=To%20split%20array%20into%20two%20arrays%20with%20JavaScript%2C%20we%20can,indexToSplit)%3B%20const%20second%20%3D%20arr.
 * links to randomiser
 * https://javascript.info/task/shuffle (shuffle array)
 */

 function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1)); // random index from 0 to i
  
      // swap elements array[i] and array[j]
      // we use "destructuring assignment" syntax to achieve that
      // you'll find more details about that syntax in later chapters
      // same can be written as:
      // let t = array[i]; array[i] = array[j]; array[j] = t
      [array[i], array[j]] = [array[j], array[i]];
    }
};

shuffle(card);  

let playerDeck = card.slice(0, 20);
let computerDeck = card.slice(20, 40);


function playCards (event) {
    let activePlayerCard = playerDeck[0];
    let activeComputerCard = computerDeck[0];

    document.getElementById('message-area').innerText = '';

    if (playerDeck.length === 0) {
        console.log('game over');
        document.getElementById('name1').innerText = null;
        document.getElementById('card-area1').children[3].outerHTML = null;
        document.getElementById('kpower1').innerText = null;
        document.getElementById('ffactor1').innerText = null;
        document.getElementById('hrating1').innerText = null;
        document.getElementById('pstrength1').innerText = null;

        document.getElementById('name2').innerText = null;
        document.getElementById('card-area2').children[3].outerHTML = null;
        document.getElementById('kpower2').innerText = null;
        document.getElementById('ffactor2').innerText = null;
        document.getElementById('hrating2').innerText = null;
        document.getElementById('pstrength2').innerText = null;
    } else {

        document.getElementById('name1').innerText = activePlayerCard.name;
        document.getElementById('card-area1').children[3].outerHTML = `<picture> 
        <source media="(max-width: 799px)" srcset=${activePlayerCard.image} width="50" height="50">
        <img src=${activePlayerCard.image} alt="working resize test" width="100" height="100">
        </picture>`;
        document.getElementById('kpower1').innerText = activePlayerCard.kpower;
        document.getElementById('ffactor1').innerText = activePlayerCard.ffactor;
        document.getElementById('hrating1').innerText = activePlayerCard.hrating;
        document.getElementById('pstrength1').innerText = activePlayerCard.pstrength;
    
        document.getElementById('name2').innerText = activeComputerCard.name;
        document.getElementById('name2').hidden = true;
        document.getElementById('card-area2').children[3].outerHTML = `<picture> 
        <source media="(max-width: 799px)" srcset=${activeComputerCard.image} width="50" height="50">
        <img src=${activeComputerCard.image} alt="working resize test" width="100" height="100">
        </picture>`;
        document.getElementById('card-area2').children[3].style.visibility = "hidden";
        document.getElementById('kpower2').innerText = activeComputerCard.kpower;
        document.getElementById('kpower2').hidden = true;
        document.getElementById('ffactor2').innerText = activeComputerCard.ffactor;
        document.getElementById('ffactor2').hidden = true;
        document.getElementById('hrating2').innerText = activeComputerCard.hrating;
        document.getElementById('hrating2').hidden = true;
        document.getElementById('pstrength2').innerText = activeComputerCard.pstrength;
        document.getElementById('pstrength2').hidden = true;
        
    }

};

playCards();

let fieldP; 
let fieldC;

let fieldP1 = document.getElementById('kpower1');
let fieldC1 = document.getElementById('kpower2');

let fieldP2 = document.getElementById('ffactor1');
let fieldC2 = document.getElementById('ffactor2');

let fieldP3 = document.getElementById('hrating1');
let fieldC3 = document.getElementById('hrating2');

let fieldP4 = document.getElementById('pstrength1');
let fieldC4 = document.getElementById('pstrength2');

function setKpowerField() {
    fieldP = fieldP1.innerHTML;
    fieldC = fieldC1.innerHTML;
    document.getElementById('name2').hidden = false;
    document.getElementById('card-area2').children[3].style.visibility = "visible";
    document.getElementById('kpower2').hidden = false;
    document.getElementById('ffactor2').hidden = false;
    document.getElementById('hrating2').hidden = false;
    document.getElementById('pstrength2').hidden = false;
    battle();
};

function setFfactorField() {
    fieldP = fieldP2.innerHTML;
    fieldC = fieldC2.innerHTML;
    document.getElementById('name2').hidden = false;
    document.getElementById('card-area2').children[3].style.visibility = "visible";
    document.getElementById('kpower2').hidden = false;
    document.getElementById('ffactor2').hidden = false;
    document.getElementById('hrating2').hidden = false;
    document.getElementById('pstrength2').hidden = false;
    battle();
};

function setHratingField() {
    fieldP = fieldP3.innerHTML;
    fieldC = fieldC3.innerHTML;
    document.getElementById('name2').hidden = false;
    document.getElementById('card-area2').children[3].style.visibility = "visible";
    document.getElementById('kpower2').hidden = false;
    document.getElementById('ffactor2').hidden = false;
    document.getElementById('hrating2').hidden = false;
    document.getElementById('pstrength2').hidden = false;
    battle();
};

function setPstrengthField() {
    fieldP = fieldP4.innerHTML;
    fieldC = fieldC4.innerHTML;
    document.getElementById('name2').hidden = false;
    document.getElementById('card-area2').children[3].style.visibility = "visible";
    document.getElementById('kpower2').hidden = false;
    document.getElementById('ffactor2').hidden = false;
    document.getElementById('hrating2').hidden = false;
    document.getElementById('pstrength2').hidden = false;
    battle();
};

function battle() {
    fieldP1.removeEventListener('click', setKpowerField);
    fieldP2.removeEventListener('click', setFfactorField);
    fieldP3.removeEventListener('click', setHratingField);
    fieldP4.removeEventListener('click', setPstrengthField);
    
    if (playerDeck.length === 0) {
        console.log('game over');
    } else {
        if (fieldP > fieldC) {
        console.log('win')
        playerWins.push(playerDeck[0]);
        playerWins.push(computerDeck[0]);
        playerDeck.shift();
        computerDeck.shift();
        document.getElementById('message-area').innerText = 'Winner... next card';
        setTimeout(playCards, 1500);

        document.getElementById('pscore').textContent = playerWins.length;
    } else if (fieldP < fieldC) {
        console.log('lose')
        computerWins.push(playerDeck[0]);
        computerWins.push(computerDeck[0]);
        playerDeck.shift();
        computerDeck.shift();   
        document.getElementById('message-area').innerText = 'Loser... next card';
        setTimeout(playCards, 1500);

        document.getElementById('cscore').textContent = computerWins.length;    
    } else if (fieldP == fieldC) {
        playerWins.push(playerDeck[0]);
        computerWins.push(computerDeck[0]);
        playerDeck.shift();
        computerDeck.shift(); 
        document.getElementById('message-area').innerText = 'Draw... next card';
        setTimeout(playCards, 1500);

        document.getElementById('pscore').textContent = playerWins.length;
        document.getElementById('cscore').textContent = computerWins.length;
    }
    
    setTimeout(addListeners, 1500);
}};


//battle function listener
function addListeners () {
    fieldP1.addEventListener('click', setKpowerField);
    fieldP2.addEventListener('click', setFfactorField);
    fieldP3.addEventListener('click', setHratingField);
    fieldP4.addEventListener('click', setPstrengthField);
}

addListeners();

//next game button reloads the page
function nextGame(event) {
    if (playerDeck.length === 0) {
        location.reload();
    } else {
        alert('finish this game first!')
    }
}

let myButton = document.getElementById('next-game');
myButton.addEventListener('click', nextGame);
